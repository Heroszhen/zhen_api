{% extends 'base.html.twig' %}

{% block title %}Hello TestController!{% endblock %}

{% block body %}
<div class="example-wrapper">
    <h1>Test upload file to s3</h1>

    <form>
        <input type="file"><br>
        <button type="submit">Send</button>
    </form>
</div>

<script>
    document.querySelector('form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const file = e.target.querySelector('input').files.item(0);
        if (file) {
            console.log(file)
            const formData = new FormData();
            formData.append('file', file);
            formData.append('filename', 'abc.png');
            try {
                let response = await fetch(
                    '/test/send-file',
                    {
                        method: 'POST',
                        headers: { 'X-Requested-With': 'XMLHttpRequest' },
                        body: formData,
                    }
                );

                if (response.ok) {
                    
                }
            } catch (e) {

            }
        }
    });
</script>
{% endblock %}
